{
  "service": {
    "version": "1.0.0.2",
    "specVersion": "v3",
    "catalog_metadata": {
      "name": "Lamp IBM Cloud",
      "description": "",
      "image": "serviceicon_1.svg",
      "category": "Application Services",
      "bullets": [],
      "providerDisplayName": "IBM",
      "longDescription": "",
      "documentationUrl": "",
      "supportUrl": "",
      "bindable": false,
      "updatable": "",
      "systemTags": true
    },
    "tags": [
      {
        "name": "environment",
        "label": "Environment",
        "type": "string",
        "immutable": false,
        "hidden": false,
        "required": true,
        "secured": false,
        "description": "Unique identifer added to the provisioned VMs.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Write",
        "options": [
          {
            "label": "Development",
            "value": "dev",
            "default": true
          },
          {
            "label": "Quality Assurance",
            "value": "qa",
            "default": false
          },
          {
            "label": "Production",
            "value": "prod",
            "default": false
          },
          {
            "label": "Test",
            "value": "test",
            "default": false
          }
        ]
      },
      {
        "name": "Name",
        "label": "Name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.name}"
      },
      {
        "name": "request_group",
        "label": "request_group",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The current context group id of the current user that requested the provisioning of the template. This is important because a user may be part of more than one group and this identifies the context of which group the user made the request.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.group}"
      },
      {
        "name": "request_user",
        "label": "request_user",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "The user id of the current user that requested the provisioning of the template.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.owner}"
      },
      {
        "name": "service_name",
        "label": "service_name",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Name provided for the service instance by the end user at time of request",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.name}"
      },
      {
        "name": "service_identifier",
        "label": "service_identifier",
        "type": "string",
        "immutable": true,
        "hidden": false,
        "required": false,
        "secured": false,
        "description": "Unique identifer generated by ICAM which is mapped to the service instance of the template provisioned.",
        "isSystemTag": true,
        "customtype": "string",
        "permission": "Read-Only",
        "default": "${svc_instance.service_instance_id}"
      }
    ],
    "downgrade_to": [],
    "actions": [
      {
        "type": "provision",
        "name": "Provision",
        "description": "Default action for deployment of service",
        "input_parameters": [
          {
            "name": "inventory_name",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": true,
            "required": false,
            "secured": false,
            "isDynamic": false,
            "editable": false,
            "default": "ans-inv-lamp"
          },
          {
            "name": "credential_suffix",
            "label": "",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": true,
            "required": false,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": false,
            "default": "ans-cred-lamp"
          },
          {
            "name": "user",
            "label": "username",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": true,
            "default": "root",
            "passbyname": false,
            "dynamicDetails": {}
          },
          {
            "name": "allinone",
            "label": "AllInOne",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "isDynamic": false,
            "editable": false,
            "options": [
              {
                "label": "False",
                "value": "false",
                "default": true
              },
              {
                "label": "True",
                "value": "true",
                "default": false
              }
            ],
            "passbyname": false,
            "dynamicDetails": {}
          },
          {
            "name": "webhook",
            "label": "Webhook url",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": false,
            "required": false,
            "secured": false,
            "isDynamic": false,
            "editable": false,
            "default": "http://192.168.122.1:9000/hooks/mcm",
            "passbyname": false,
            "dynamicDetails": {}
          }
        ],
        "flow": {
          "conditions": [
            {
              "decision": {
                "title": "Choice All in One",
                "options": [
                  {
                    "case": "false",
                    "sequence": {
                      "0": "ibmcloud85f99f10",
                      "1": "inventore4504cc4"
                    }
                  },
                  {
                    "case": "true",
                    "sequence": {
                      "0": "ibmcloude985318d",
                      "1": "inventor60dc2369"
                    }
                  }
                ],
                "id": "decision5bae4adf",
                "editable": true,
                "mapped_parameter": "${input_parameters.allinone}",
                "isErrorFlow": false
              }
            }
          ],
          "templates": [
            {
              "ibm-cloud-test": {
                "title": "ibm-cloud-test_c0f147",
                "template_name": "ibm-cloud-test",
                "version": "master",
                "id": "ibmcloud85f99f10",
                "template_type": "Terraform",
                "template_content_type": "IBM,Other",
                "template_provider": "IBM,Other",
                "instance_name": "",
                "template_data_objects": {},
                "template_params": {
                  "vm_webserver_domain": "ibm.com",
                  "vm_webserver_hostname": "webhost",
                  "vm_webserver_datacenter": "par01",
                  "ibm_ssh_key_name": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDWVcdGD+xpfEiWYjSXRd1k77kFewP0JwNQLVDyTUefrWTVmFGlBN4ycc1M16TB2I+7V+ZxWZDdY8M11/WEiegTvCEs6XVziG9Aa6cUsrALAWuxBdOcK4Hvpb0W09AaLep8k2DAuRiVswxUi8CcEbenvMu4GzJqs7t77Zm1KN65hKyw4PYAMg9aKt2VmrM7LoYZCr8759y8GIaiwE3UZDb3YAc9nfxc+el+2Nga9o+mwyD1VmjTuSRYs37ndBRsry5au6cuP2T1JYZWfRh9Fpnj3bVbeGrmjLuoSTruzqJKTr/dUBklEZvsLPkpqN5cXLt2LDmws7p+uaNRrgok8nGt",
                  "vm_webserver_os_reference_code": "CENTOS_7_64",
                  "testsecurefield": "123456789",
                  "ibm_network_public_vlan_id": "2894292",
                  "ibm_network_private_vlan_id": "2894294",
                  "vm_dbserver_domain": "ibm.com",
                  "vm_dbserver_hostname": "dbhost",
                  "vm_dbserver_datacenter": "par01",
                  "vm_dbserver_os_reference_code": "CENTOS_7_64"
                },
                "outputs": [
                  "IP_address_webserver",
                  "IP_address_dbserver",
                  "TestSecureField"
                ],
                "editable": true,
                "cloud_connection_names": [
                  {
                    "provider": "IBM",
                    "connection_name": "IBM_CLOUD"
                  },
                  {
                    "provider": "Other",
                    "connection_name": "Other"
                  }
                ],
                "provider_engine_version": "0.11.11"
              }
            },
            {
              "Inventory": {
                "title": "Inventory2vms",
                "template_name": "Inventory",
                "version": "1.0",
                "id": "inventore4504cc4",
                "template_type": "ANSIBLE",
                "template_content_type": "ANSIBLE",
                "template_provider": "ANSIBLE",
                "instance_name": "",
                "cloud_connection_name": "ansible_tower",
                "template_data_objects": {},
                "template_params": {
                  "organizationName": "Default",
                  "inventoryName": "",
                  "extraVars": {},
                  "hostgroup": {
                    "webhosts": "${templates.ibmcloud85f99f10.output.IP_address_webserver}",
                    "dbhosts": "${templates.ibmcloud85f99f10.output.IP_address_dbserver}"
                  }
                },
                "outputs": [
                  "inventory_name"
                ],
                "editable": true,
                "provider_engine_version": "1.0"
              }
            },
            {
              "ibm-cloud-test-dev": {
                "title": "ibm-cloud-test-dev_361a2d",
                "template_name": "ibm-cloud-test-dev",
                "version": "master",
                "id": "ibmcloude985318d",
                "template_type": "Terraform",
                "template_content_type": "IBM,Other",
                "template_provider": "IBM,Other",
                "instance_name": "",
                "template_data_objects": {},
                "template_params": {
                  "vm_webserver_domain": "ibm.com",
                  "vm_webserver_hostname": "webhost",
                  "vm_webserver_datacenter": "par01",
                  "ibm_ssh_key_name": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDWVcdGD+xpfEiWYjSXRd1k77kFewP0JwNQLVDyTUefrWTVmFGlBN4ycc1M16TB2I+7V+ZxWZDdY8M11/WEiegTvCEs6XVziG9Aa6cUsrALAWuxBdOcK4Hvpb0W09AaLep8k2DAuRiVswxUi8CcEbenvMu4GzJqs7t77Zm1KN65hKyw4PYAMg9aKt2VmrM7LoYZCr8759y8GIaiwE3UZDb3YAc9nfxc+el+2Nga9o+mwyD1VmjTuSRYs37ndBRsry5au6cuP2T1JYZWfRh9Fpnj3bVbeGrmjLuoSTruzqJKTr/dUBklEZvsLPkpqN5cXLt2LDmws7p+uaNRrgok8nGt",
                  "vm_webserver_os_reference_code": "CENTOS_7_64",
                  "testsecurefield": "123456789",
                  "ibm_network_public_vlan_id": "2894292",
                  "ibm_network_private_vlan_id": "2894294"
                },
                "outputs": [
                  "IP_address_webserver",
                  "TestSecureField"
                ],
                "editable": true,
                "cloud_connection_names": [
                  {
                    "provider": "IBM",
                    "connection_name": "IBM_CLOUD"
                  },
                  {
                    "provider": "Other",
                    "connection_name": "Other"
                  }
                ],
                "provider_engine_version": "0.11.11"
              }
            },
            {
              "Inventory": {
                "title": "Inventory1vm",
                "template_name": "Inventory",
                "version": "1.0",
                "id": "inventor60dc2369",
                "template_type": "ANSIBLE",
                "template_content_type": "ANSIBLE",
                "template_provider": "ANSIBLE",
                "instance_name": "",
                "cloud_connection_name": "ansible_tower",
                "template_data_objects": {},
                "template_params": {
                  "organizationName": "Default",
                  "inventoryName": "",
                  "extraVars": {},
                  "hostgroup": {
                    "webhosts": "${templates.ibmcloude985318d.output.IP_address_webserver}",
                    "dbhosts": "${templates.ibmcloude985318d.output.IP_address_webserver}"
                  }
                },
                "outputs": [
                  "inventory_name"
                ],
                "editable": true,
                "provider_engine_version": "1.0"
              }
            },
            {
              "Credential": {
                "title": "Credential_500545",
                "template_name": "Credential",
                "version": "1.0",
                "id": "credenti435b6a55",
                "template_type": "ANSIBLE",
                "template_content_type": "ANSIBLE",
                "template_provider": "ANSIBLE",
                "instance_name": "",
                "cloud_connection_name": "ansible_tower",
                "template_data_objects": {},
                "template_params": {
                  "credential_name_suffix": "${input_parameters.credential_suffix}",
                  "user_name": "${input_parameters.user}",
                  "ssh_private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEA1lXHRg/saXxIlmI0l0XdZO+5BXsD9CcDUC1Q8k1Hn61k1ZhR\npQTeMnHNTNekwdiPu1fmcVmQ3WPDNdf1hInoE7whLOl1c4hvQGunFLKwCwFrsQXT\nnCuB76W9FtPQGi3qfJNgwLkYlbMMVIvAnBG3p7zLuBsyarO7e+2ZtSjeuYSssOD2\nADIPWirdlZqzOy6GGQq/O+fcvBiGosBN1GQ292AHPZ38XPnpftjYGvaPpsMg9VZo\n07kkWLN+53QUbK8uWrunLj9k9SWGVn0YfRaZ4921W3hq5oy7qEk67s6iSk6/3VAZ\nJRGb7Cz5KajeXFy7diw5sLO6frmjUa4KJPJxrQIDAQABAoIBAB9O1lXom4rpCZ1V\n6QKzxNwqnCctye0PCc/bXriWC0FKzbDZmAt3w5EwyGFSGpHqNUyTUWj7QUrleK1T\nx1w93LWNRHdP/sUKh92sG/LNCyQAaB+qjzd/r3I3DoDYHczFKjxaNsbQAsRTLBjp\ndRAXEnGhBUz2RA4MBPXcRhiNSMNmVjVjEqrYzRWbPhSvKDmcxdHqF3642/G8RGoL\nKwlZh4bYAPBTA7K0fk/Rz3xVCpJTYtx2nWv0xLH/nhPrk2h44CcCQThwFkefbtVg\nfHcDjf40XMNQM0vEa2EUKsIkSdN5MbctrUbNLWSVCUeadoIHTuw32gnmYuAE/51g\ntYjTjG0CgYEA/6vfLJfxQqMI7oPM65kG0gkxot2kVX3t7moPBxQVXmyQ1yeE/VHX\nbkr+DHrSid7DNuQdjTDb9j+Mapb8Di1GH4iSRoYUkaPwGSmykYd1KVcMTd0Gazx2\nY/Dz/fgzOVQzDi7F1eq2Qcw+0aifW8ZSahZdj21NGqblGABuWS1RhKsCgYEA1pxO\nFHJ0u/bL1ViHnI70WO8XdkCtg+kzp/bPyWXumutAywv2tmuItwriAe86phbISUW6\n/KyDQacd7nyn21o5kwkvfs2f2v/5fFe64y3JvU5CXOLV1ilwkNmnqTTH2xohArn5\noV+RxD4wzHv9ZJ8+kqMYi8jAUpoIfJlqnUVdcwcCgYAYktFpfNUgfYEPQ7W/cz7X\nkzClIb54xRjIUINPP9vp7m9hbpf2rRYSsLyIQInZ3IJQ1U4N0wNhQKxjVk21ox5Z\nS4wboSl68hHSqVJTcHyPU6GIHlVOm0oZwwAAigmKWhBqLY6wR9XqrxHenuFqNb6Y\nGbw2W+AMTrw4OVph0dxC7wKBgG6WjtmUfTjanQCsJP104M7vLYzfGUqvIdI8qagj\nYYftEC9RU+l+ki2YawwKJZOui7jOOOO5Vc2/+vmIvMqYvLBa/GGAPg6Q9xOu9XvZ\nfWqSaDoLHZvFMN9DeVUFALOTzEzmXo9cevXAAk9s2Q8/y/OuHZjycsBd5V+ngrvW\nIaiDAoGBAJz9HLPaVewXWUeJ12FEhcuoDMT6atkWv+mNL0v6q9iKYVs3mBQqq7di\nhLFoSE/eFOCPYGi0TLcpbyAngUNRQ9EjfwvtTBAaOLi8Tu3NUx7ICRc/yRBCpEv1\nofgfgH2kkgzFN5r5/FyeDdo1GJwA0ggRxIAr/C6u6JsIacpPuAdE\n-----END RSA PRIVATE KEY-----",
                  "password": ""
                },
                "outputs": [
                  "credential_name"
                ],
                "editable": true,
                "isErrorFlow": false
              }
            },
            {
              "Trader": {
                "title": "Trader",
                "template_name": "Trader",
                "version": "1.0",
                "id": "trader10b50caa44",
                "template_type": "ANSIBLE",
                "template_content_type": "ANSIBLE",
                "template_provider": "ANSIBLE",
                "instance_name": "",
                "cloud_connection_name": "ansible_tower",
                "template_data_objects": {},
                "template_params": {
                  "inventory_name": "${templates.inventore4504cc4.output.inventory_name||templates.inventor60dc2369.output.inventory_name}",
                  "credential_name": "${templates.credenti435b6a55.output.credential_name}",
                  "extra_variables": {
                    "ipdb": "${templates.ibmcloud85f99f10.output.IP_address_dbserver||templates.ibmcloude985318d.output.IP_address_webserver}",
                    "ipweb": "${templates.ibmcloud85f99f10.output.IP_address_webserver||templates.ibmcloude985318d.output.IP_address_webserver}"
                  }
                },
                "outputs": [
                  "job_status"
                ],
                "editable": true,
                "isErrorFlow": false
              }
            }
          ],
          "resthooks": [
            {
              "resthook": {
                "title": "Send notification",
                "id": "resthook643aed54",
                "headers": {
                  "accept": "application/json",
                  "Content-Type": "application/json"
                },
                "editable": true,
                "url": "${input_parameters.webhook}",
                "payload": {
                  "blocks": [
                    {
                      "type": "section",
                      "text": {
                        "type": "mrkdwn",
                        "text": "You can access the application on this url : http://${templates.ibmcloud85f99f10.output.IP_address_webserver||templates.ibmcloude985318d.output.IP_address_webserver}:9080/tradelite"
                      }
                    }
                  ]
                },
                "method": "POST"
              }
            }
          ],
          "notifications": [],
          "sequence": {
            "0": "decision5bae4adf",
            "1": "credenti435b6a55",
            "2": "trader10b50caa44",
            "3": "resthook643aed54"
          },
          "error_sequence": {}
        },
        "output_parameters": []
      }
    ],
    "plans": [
      {
        "name": "Standard",
        "description": "To deploy a Standard plan",
        "actions": [],
        "plan_parameters": []
      },
      {
        "name": "Plan 2 Dev",
        "plan_parameters": [
          {
            "name": "allinone",
            "label": "AllInOne",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "isDynamic": false,
            "editable": true,
            "options": [
              {
                "label": "False",
                "value": "false",
                "default": false
              },
              {
                "label": "True",
                "value": "true",
                "default": true
              }
            ]
          },
          {
            "name": "inventory_name",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": true,
            "required": false,
            "secured": false,
            "isDynamic": false,
            "editable": false,
            "default": "ans-inv-lamp"
          },
          {
            "name": "credential_suffix",
            "label": "",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": true,
            "required": false,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": false,
            "default": "ans-cred-lamp"
          },
          {
            "name": "user",
            "label": "username",
            "customtype": "string",
            "type": "string",
            "immutable": false,
            "hidden": false,
            "required": true,
            "secured": false,
            "description": "",
            "isDynamic": false,
            "editable": true,
            "default": "root",
            "passbyname": false,
            "dynamicDetails": {}
          },
          {
            "name": "webhook",
            "label": "Webhook url",
            "customtype": "string",
            "type": "string",
            "immutable": true,
            "hidden": false,
            "required": false,
            "secured": false,
            "isDynamic": false,
            "editable": false,
            "default": "http://192.168.122.1:9000/hooks/mcm",
            "passbyname": false,
            "dynamicDetails": {}
          }
        ]
      }
    ]
  }
}
